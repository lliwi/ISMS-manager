{% extends "base.html" %}

{% block title %}Configuración del Sistema - ISMS Manager{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-6">
        <h1 class="h2 mb-0">Configuración del Sistema</h1>
        <p class="text-muted">Administrar parámetros y configuración general</p>
    </div>
    <div class="col-md-6 text-end">
        <a href="{{ url_for('admin.index') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Volver al Panel
        </a>
    </div>
</div>

<div class="row">
    <!-- Tipos de Documentos -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-file-alt"></i> Tipos de Documentos
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Gestiona los tipos de documentos disponibles en el sistema (políticas, procedimientos, instrucciones, etc.)
                </p>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h3 class="mb-0">{{ doc_types_count }}</h3>
                        <small class="text-muted">tipos configurados</small>
                    </div>
                    <div>
                        <i class="fas fa-file-alt fa-3x text-primary opacity-25"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('admin.document_types') }}" class="btn btn-primary w-100">
                    <i class="fas fa-cog"></i> Gestionar Tipos de Documentos
                </a>
            </div>
        </div>
    </div>

    <!-- Versiones ISO -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-info text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-book"></i> Versiones ISO
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Gestiona las versiones de las normas ISO 27001 utilizadas en el sistema (2013, 2022, etc.)
                </p>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h3 class="mb-0">{{ iso_versions_count }}</h3>
                        <small class="text-muted">versiones configuradas</small>
                    </div>
                    <div>
                        <i class="fas fa-book fa-3x text-info opacity-25"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('admin.iso_versions') }}" class="btn btn-info w-100">
                    <i class="fas fa-cog"></i> Gestionar Versiones ISO
                </a>
            </div>
        </div>
    </div>

    <!-- Tipos de Activos -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-secondary text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-cubes"></i> Tipos de Activos
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Gestiona los tipos de activos del inventario organizados por categorías (Hardware, Software, Información, etc.)
                </p>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h3 class="mb-0">{{ asset_types_count }}</h3>
                        <small class="text-muted">tipos configurados</small>
                    </div>
                    <div>
                        <i class="fas fa-cubes fa-3x text-secondary opacity-25"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('admin.asset_types') }}" class="btn btn-secondary w-100">
                    <i class="fas fa-cog"></i> Gestionar Tipos de Activos
                </a>
            </div>
        </div>
    </div>

    <!-- Períodos de Amortización -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-warning text-dark">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-line"></i> Períodos de Amortización
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Configura los años de vida útil y método de depreciación para el cálculo automático del valor actual de activos
                </p>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h3 class="mb-0">6</h3>
                        <small class="text-muted">categorías configuradas</small>
                    </div>
                    <div>
                        <i class="fas fa-chart-line fa-3x text-warning opacity-25"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('admin.depreciation_periods') }}" class="btn btn-warning text-dark w-100">
                    <i class="fas fa-cog"></i> Gestionar Períodos de Amortización
                </a>
            </div>
        </div>
    </div>

    <!-- Catálogo de Amenazas MAGERIT -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-danger text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-exclamation-triangle"></i> Catálogo de Amenazas
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Gestiona el catálogo de amenazas según metodología MAGERIT 3.2 (Naturales, Industriales, Errores, Ataques)
                </p>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h3 class="mb-0">{{ amenazas_count }}</h3>
                        <small class="text-muted">amenazas configuradas</small>
                    </div>
                    <div>
                        <i class="fas fa-exclamation-triangle fa-3x text-danger opacity-25"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('admin.amenazas') }}" class="btn btn-danger w-100">
                    <i class="fas fa-cog"></i> Gestionar Catálogo de Amenazas
                </a>
            </div>
        </div>
    </div>
</div>

    <!-- Roles del Sistema -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-success text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-user-shield"></i> Roles del Sistema
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Los roles definen los permisos y accesos de los usuarios en el sistema.
                </p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-crown text-danger"></i> <strong>Administrador:</strong> Control total</li>
                    <li><i class="fas fa-shield-alt text-primary"></i> <strong>CISO:</strong> Gestión de seguridad</li>
                    <li><i class="fas fa-search text-info"></i> <strong>Auditor:</strong> Auditorías internas</li>
                    <li><i class="fas fa-user-tie text-success"></i> <strong>Propietario:</strong> Procesos específicos</li>
                    <li><i class="fas fa-user text-secondary"></i> <strong>Usuario:</strong> Acceso básico</li>
                </ul>
            </div>
            <div class="card-footer">
                <button class="btn btn-success w-100" disabled>
                    <i class="fas fa-info-circle"></i> Roles Predefinidos (no modificables)
                </button>
            </div>
        </div>
    </div>

    <!-- Configuración de Seguridad -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-danger text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-shield-alt"></i> Configuración de Seguridad
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Parámetros de seguridad del sistema actualmente configurados.
                </p>
                <ul class="list-unstyled small">
                    <li><i class="fas fa-check text-success"></i> Bloqueo de cuenta: 5 intentos</li>
                    <li><i class="fas fa-check text-success"></i> Tiempo de bloqueo: 30 minutos</li>
                    <li><i class="fas fa-check text-success"></i> Expiración de contraseñas: 90 días</li>
                    <li><i class="fas fa-check text-success"></i> Complejidad de contraseña: Habilitada</li>
                    <li><i class="fas fa-check text-success"></i> Auditoría completa: Activa</li>
                    <li><i class="fas fa-check text-success"></i> Protección CSRF: Activa</li>
                </ul>
            </div>
            <div class="card-footer">
                <button class="btn btn-danger w-100" disabled>
                    <i class="fas fa-lock"></i> Configuración en código (seguridad)
                </button>
            </div>
        </div>
    </div>
</div>

<div class="row">

<!-- Información Adicional -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-info-circle"></i> Información del Sistema
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>Versión del Sistema</h6>
                        <p class="text-muted">ISMS Manager v1.1.0</p>
                    </div>
                    <div class="col-md-4">
                        <h6>Conformidad</h6>
                        <p class="text-muted">ISO/IEC 27001:2022</p>
                    </div>
                    <div class="col-md-4">
                        <h6>Última Actualización</h6>
                        <p class="text-muted">Octubre 2025</p>
                    </div>
                </div>
                <hr>
                <div class="alert alert-info mb-0">
                    <i class="fas fa-lightbulb"></i>
                    <strong>Nota:</strong> Algunas configuraciones de seguridad están definidas en el código por seguridad y no pueden modificarse desde la interfaz.
                    Para cambios avanzados, contacta al administrador del sistema.
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
